# Where to DINE 快速开始指南 🍽️

中文完整教程 - 从零开始运行项目

---

## 📋 目录

1. [系统要求](#系统要求)
2. [快速演示（5分钟）](#快速演示)
3. [完整运行（包含数据处理）](#完整运行)
4. [项目展示方式](#项目展示方式)
5. [常见问题](#常见问题)

---

## 系统要求

### 必需软件
- **Python 3.8+** - 数据处理
- **Web浏览器** - Chrome, Firefox, Safari都可以
- **Git** - 版本控制（可选）

### 可选软件
- **VSCode** - 代码编辑器
- **Anaconda** - Python环境管理

---

## 快速演示（5分钟）

### 方式A：直接打开HTML文件

**适用于：** Windows, Mac, Linux

```bash
# 1. 进入项目目录
cd where-to-dine

# 2. 进入前端文件夹
cd frontend

# 3. 双击打开 index.html
# 或者用浏览器打开这个文件
```

**Windows用户：**
```cmd
start index.html
```

**Mac用户：**
```bash
open index.html
```

**Linux用户：**
```bash
xdg-open index.html
```

### 方式B：使用本地服务器（推荐）

```bash
# 从项目根目录运行

# Python 3方式（推荐）
python -m http.server 8000

# 或者 Python 2
python -m SimpleHTTPServer 8000
```

然后打开浏览器访问：**http://localhost:8000/frontend/**

### 你应该看到什么？

✅ **地图界面：**
- 一个显示纽约市的交互式地图
- 右侧有控制面板
- 顶部有紫色渐变的标题

✅ **功能测试：**
1. **点击地图任意位置** - 设置起点
2. **看到三个彩色圈圈** - 代表步行、公交、开车的可达范围
   - 绿色 = 步行15分钟
   - 蓝色 = 公交30分钟
   - 红色 = 开车20分钟
3. **右侧出现推荐列表** - 显示可达的用餐热点

---

## 完整运行（包含数据处理）

### 第一步：下载数据

我已经为您创建了一个自动下载脚本！

```bash
# 从项目根目录运行
python download_data.py
```

**这个脚本会：**
- ✅ 自动下载5000个NYC餐厅数据
- ✅ 创建1000条测试用出租车数据
- ✅ 保存到正确的目录

**下载后你会得到：**
```
data/raw/
├── restaurants_nyc.csv        # 餐厅位置数据
└── taxi_trips_test.csv        # 测试用出租车数据
```

### 第二步：安装Python依赖

```bash
# 1. 进入数据处理目录
cd backend/data_processing

# 2. 创建虚拟环境（推荐）
python -m venv venv

# 3. 激活虚拟环境
# Windows:
venv\Scripts\activate

# Mac/Linux:
source venv/bin/activate

# 4. 安装所需库
pip install -r requirements.txt
```

**需要安装的库：**
- pandas - 数据处理
- geopandas - 地理空间数据
- hdbscan - 聚类算法
- shapely - 几何运算
- numpy - 数值计算

### 第三步：运行数据处理脚本

```bash
# 确保在 backend/data_processing 目录下
# 虚拟环境已激活

# 脚本1: 聚类餐厅位置
python 01_cluster_restaurants.py

# 脚本2: 聚类出租车下车点
python 02_cluster_taxi_dropoffs.py

# 脚本3: 合并生成最终热点
python 03_combine_hotspots.py
```

**每个脚本的作用：**

**脚本1** - 找出餐厅密集区域
```
输入: data/raw/restaurants_nyc.csv
输出: data/processed/dining_zones.geojson
效果: 把5000个餐厅聚类成50-100个"用餐区域"
```

**脚本2** - 找出热门下车点
```
输入: data/raw/taxi_trips_test.csv
输出: data/processed/hotspot_arrival_areas.geojson
效果: 找出人们最常去吃饭的区域
```

**脚本3** - 合并得到最终热点
```
输入: 上面两个geojson文件
输出: data/processed/final_hotspot_dining_areas.geojson
效果: 找出既有很多餐厅，又很多人去的热点区域
```

### 第四步：更新前端数据

处理完数据后，需要让网页使用真实数据：

```bash
# 复制处理好的数据到前端
cp data/processed/final_hotspot_dining_areas.geojson frontend/data/hotspots.json
```

然后修改 `frontend/js/map.js` 文件：

```javascript
// 找到这一行（约第170行）
CONFIG.api.hotspots = './data/hotspots.json'

// 修改 loadHotspotsData() 函数，加载真实数据
fetch('./data/hotspots.json')
    .then(response => response.json())
    .then(data => {
        // 加载真实的GeoJSON数据
    });
```

---

## 项目展示方式

### 展示方案1：本地演示（最简单）

**适合：** 课堂演示、小组汇报

**步骤：**
1. 启动本地服务器：`python -m http.server 8000`
2. 投影仪连接电脑
3. 打开浏览器全屏展示：http://localhost:8000/frontend/
4. 现场操作演示功能

**优点：**
- ✅ 不需要网络
- ✅ 速度快
- ✅ 数据隐私

**缺点：**
- ❌ 只能在你的电脑上展示

---

### 展示方案2：GitHub Pages（免费托管）

**适合：** 在线展示、分享给他人

**步骤：**

```bash
# 1. 提交所有代码
git add .
git commit -m "完成项目"

# 2. 推送到GitHub
git push origin main

# 3. 在GitHub网站上设置
# 访问：https://github.com/你的用户名/Test-on-Claude-code
# 点击 Settings → Pages
# Source 选择 "main" 分支
# Folder 选择 "/" 根目录

# 4. 等待几分钟，访问：
# https://你的用户名.github.io/Test-on-Claude-code/frontend/
```

**优点：**
- ✅ 完全免费
- ✅ 任何人都能访问
- ✅ 自动更新

**缺点：**
- ❌ 需要GitHub账号
- ❌ 构建需要几分钟

---

### 展示方案3：录制演示视频

**适合：** 提交作业、线上展示

**工具推荐：**
- **OBS Studio**（免费）- 录屏
- **QuickTime**（Mac自带）
- **Xbox Game Bar**（Windows自带，Win+G）

**录制内容建议：**
1. 项目介绍（30秒）
2. 地图操作演示（1分钟）
   - 点击地图设置起点
   - 切换交通方式
   - 查看推荐结果
3. 代码展示（1分钟）
   - 打开VSCode展示代码结构
   - 解释核心算法
4. 数据处理演示（1分钟）
   - 运行Python脚本
   - 展示输出结果

---

### 展示方案4：PPT + 截图

**适合：** 正式汇报

**内容结构：**
```
第1-2页: 标题和项目介绍
第3页: 问题背景（为什么需要这个系统）
第4页: 数据来源（展示数据下载截图）
第5-6页: 方法论（聚类算法原理）
第7-10页: 界面截图
  - 首页截图
  - 点击地图后的截图
  - 推荐列表截图
  - 热点详情截图
第11页: 代码展示（核心算法截图）
第12页: 结果和应用
第13页: 总结和展望
```

**截图技巧：**
- 使用浏览器全屏模式（F11）
- 选择有代表性的纽约区域（时代广场、格林威治村等）
- 截图时确保推荐列表有内容
- 可以用箭头和文字标注重点功能

---

### 展示方案5：Jupyter Notebook展示数据分析

**适合：** 技术深度汇报

创建一个 `demo.ipynb` 文件：

```python
# Cell 1: 导入库
import geopandas as gpd
import matplotlib.pyplot as plt
import pandas as pd

# Cell 2: 加载数据
restaurants = pd.read_csv('data/raw/restaurants_nyc.csv')
hotspots = gpd.read_file('data/processed/final_hotspot_dining_areas.geojson')

# Cell 3: 数据可视化
fig, ax = plt.subplots(figsize=(12, 10))
hotspots.plot(ax=ax, column='popularity_score', cmap='YlOrRd', legend=True)
plt.title('NYC Dining Hotspots by Popularity')
plt.show()

# Cell 4: 统计分析
print(f"总餐厅数: {len(restaurants)}")
print(f"识别的热点数: {len(hotspots)}")
print(f"平均热度分数: {hotspots['popularity_score'].mean():.2f}")
```

---

## 最推荐的展示组合

### 💡 方案A：课堂演示
```
1. PPT介绍（3分钟）
2. 本地网页演示（5分钟）- 现场操作
3. Jupyter Notebook展示数据（2分钟）
```

### 💡 方案B：线上展示
```
1. GitHub Pages托管网页
2. 录制3分钟演示视频
3. README.md详细文档
```

### 💡 方案C：作业提交
```
1. 完整的GitHub仓库
2. PPT报告
3. 演示视频链接
4. 书面报告PDF
```

---

## 数据格式总结表

| 数据类型 | 文件名 | 格式 | 必需列 | 示例 |
|---------|--------|------|--------|------|
| 餐厅数据 | `restaurants_nyc.csv` | CSV | name, latitude, longitude | Joe's Pizza,40.73,-74.00 |
| 出租车数据 | `taxi_trips_*.csv` 或 `.parquet` | CSV/Parquet | dropoff_datetime, dropoff_latitude, dropoff_longitude | 2023-09-15 12:30:00,40.75,-73.98 |
| 处理后热点 | `final_hotspot_dining_areas.geojson` | GeoJSON | 自动生成 | - |

---

## 常见问题解答

### Q1: 运行 `python -m http.server 8000` 后显示端口被占用？

**解决方案：**
```bash
# 换个端口号
python -m http.server 8080

# 然后访问 http://localhost:8080/frontend/
```

### Q2: 安装Python库时出错？

**解决方案：**
```bash
# 尝试升级pip
python -m pip install --upgrade pip

# 一个一个安装
pip install pandas
pip install geopandas
pip install hdbscan
pip install shapely

# 如果还是失败，使用conda
conda install geopandas
```

### Q3: 地图不显示或显示空白？

**检查清单：**
- ✅ 是否使用了本地服务器（而不是直接打开HTML）
- ✅ 浏览器控制台有没有错误（F12查看）
- ✅ 网络连接是否正常（需要加载ArcGIS API）
- ✅ 检查 `frontend/js/config.js` 配置

### Q4: 聚类脚本运行很慢或卡住？

**解决方案：**
```python
# 在脚本中减少数据量
# 修改 01_cluster_restaurants.py
df = df.sample(frac=0.5)  # 只用50%的数据

# 或者调整聚类参数
MIN_CLUSTER_SIZE = 10  # 增加这个值会更快
```

### Q5: 想下载真实的完整出租车数据？

**方法：**
```bash
# 使用wget（Mac/Linux）
wget https://d37ci6vzurychx.cloudfront.net/trip-data/yellow_tripdata_2023-09.parquet

# 或使用curl
curl -O https://d37ci6vzurychx.cloudfront.net/trip-data/yellow_tripdata_2023-09.parquet

# Windows用户可以在浏览器直接下载
# 访问: https://www.nyc.gov/site/tlc/about/tlc-trip-record-data.page
```

### Q6: 如何修改服务区域的时间？

**修改文件：** `frontend/js/config.js`

```javascript
// 找到这几行，修改数字（单位：分钟）
serviceArea: {
    walking: 15,    // 改成 10, 20, 等等
    transit: 30,    // 改成 20, 40, 等等
    driving: 20     // 改成 15, 30, 等等
}
```

### Q7: 可以部署到手机上查看吗？

**可以！两种方式：**

**方式1 - 同一WiFi下：**
```bash
# 查看电脑IP地址
# Windows: ipconfig
# Mac/Linux: ifconfig

# 假设IP是 192.168.1.100
# 手机浏览器访问: http://192.168.1.100:8000/frontend/
```

**方式2 - GitHub Pages：**
部署到GitHub Pages后，用手机访问GitHub给的URL

---

## 完整运行检查清单

### 准备阶段
- [ ] 安装了Python 3.8+
- [ ] 有网络连接
- [ ] 下载了项目代码

### 快速演示
- [ ] 启动本地服务器
- [ ] 浏览器能打开地图
- [ ] 可以点击地图
- [ ] 能看到服务区域圈圈
- [ ] 推荐列表有显示

### 完整运行
- [ ] 运行了 `download_data.py`
- [ ] 安装了Python依赖
- [ ] 成功运行了3个处理脚本
- [ ] 生成了3个GeoJSON文件
- [ ] 前端加载了真实数据

### 展示准备
- [ ] 选择了展示方式
- [ ] 测试了所有功能
- [ ] 准备了演讲稿/PPT
- [ ] 录制了演示视频（如需要）

---

## 需要帮助？

如果遇到问题，检查顺序：
1. **看控制台** - 按F12查看浏览器错误信息
2. **看终端** - Python脚本的错误提示
3. **看文档** - README.md 和 docs/ 文件夹
4. **查代码** - 每个文件都有详细注释

---

## 下一步学习

掌握基础后，可以尝试：

1. **添加新功能**
   - 按菜系筛选（中餐、意大利餐等）
   - 按价格范围筛选
   - 保存收藏的地点

2. **改进算法**
   - 使用真实路网而不是直线距离
   - 加入实时交通数据
   - 考虑天气因素

3. **美化界面**
   - 自定义配色方案
   - 添加动画效果
   - 优化移动端显示

---

## 祝您展示成功！🎉

记住：
- **简单优先** - 先让基础功能跑起来
- **测试充分** - 演示前多测试几遍
- **准备预案** - 万一出问题，准备好截图/视频

Good luck with your presentation! 加油！
